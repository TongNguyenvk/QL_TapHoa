# HÆ¯á»šNG DáºªN CHá»¨C NÄ‚NG IN áº¤N VÃ€ Lá»ŠCH Sá»¬ GIAO Dá»ŠCH

## Tá»•ng quan
ÄÃ£ nÃ¢ng cáº¥p module BÃ¡n hÃ ng vÃ  Nháº­p kho vá»›i cÃ¡c chá»©c nÄƒng:
- In hÃ³a Ä‘Æ¡n/phiáº¿u nháº­p
- Xem lá»‹ch sá»­ giao dá»‹ch
- Xem trÆ°á»›c vÃ  in láº¡i cÃ¡c giao dá»‹ch cÅ©

## CÃ¡c Form má»›i

### 1. frmXemTruocIn
**Má»¥c Ä‘Ã­ch:** Hiá»ƒn thá»‹ xem trÆ°á»›c vÃ  in hÃ³a Ä‘Æ¡n/phiáº¿u nháº­p

**TÃ­nh nÄƒng:**
- Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ thÃ´ng tin hÃ³a Ä‘Æ¡n/phiáº¿u nháº­p
- Xem trÆ°á»›c trÆ°á»›c khi in
- In ra mÃ¡y in

**CÃ¡ch sá»­ dá»¥ng:**
- Form nÃ y Ä‘Æ°á»£c má»Ÿ tá»± Ä‘á»™ng sau khi thanh toÃ¡n/lÆ°u phiáº¿u (náº¿u chá»n "CÃ³")
- Hoáº·c má»Ÿ tá»« lá»‹ch sá»­ báº±ng cÃ¡ch double-click vÃ o dÃ²ng giao dá»‹ch

**Giao diá»‡n:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        Cá»¬A HÃ€NG Táº P HÃ“A ABC             â•‘
â•‘     Äá»‹a chá»‰: 123 ÄÆ°á»ng ABC, TP.HCM      â•‘
â•‘          SÄT: 0123-456-789              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘          HÃ“A ÄÆ N BÃN Láºº                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Sá»‘ HÄ: 1
NgÃ y bÃ¡n: 19/10/2025 14:30
NhÃ¢n viÃªn: Nguyá»…n VÄƒn A

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[Báº£ng chi tiáº¿t sáº£n pháº©m]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Tá»”NG TIá»€N: 500,000 Ä‘

[NÃºt In] [NÃºt ÄÃ³ng]
```

### 2. frmLichSuHoaDon
**Má»¥c Ä‘Ã­ch:** Xem lá»‹ch sá»­ cÃ¡c hÃ³a Ä‘Æ¡n Ä‘Ã£ bÃ¡n

**TÃ­nh nÄƒng:**
- Lá»c theo khoáº£ng thá»i gian
- Hiá»ƒn thá»‹ danh sÃ¡ch hÃ³a Ä‘Æ¡n
- Double-click Ä‘á»ƒ xem chi tiáº¿t vÃ  in láº¡i

**CÃ¡ch má»Ÿ:**
- Tá»« form BÃ¡n hÃ ng: Click nÃºt "ğŸ“‹ Lá»‹ch sá»­"

**Bá»™ lá»c:**
- Tá»« ngÃ y: Chá»n ngÃ y báº¯t Ä‘áº§u
- Äáº¿n ngÃ y: Chá»n ngÃ y káº¿t thÃºc
- Click "ğŸ” Lá»c" Ä‘á»ƒ tÃ¬m kiáº¿m

**Danh sÃ¡ch hiá»ƒn thá»‹:**
- MÃ£ HÄ
- NgÃ y bÃ¡n
- NhÃ¢n viÃªn
- Tá»•ng tiá»n

### 3. frmLichSuPhieuNhap
**Má»¥c Ä‘Ã­ch:** Xem lá»‹ch sá»­ cÃ¡c phiáº¿u nháº­p kho

**TÃ­nh nÄƒng:**
- Lá»c theo khoáº£ng thá»i gian
- Hiá»ƒn thá»‹ danh sÃ¡ch phiáº¿u nháº­p
- Double-click Ä‘á»ƒ xem chi tiáº¿t vÃ  in láº¡i

**CÃ¡ch má»Ÿ:**
- Tá»« form Nháº­p kho: Click nÃºt "ğŸ“‹ Lá»‹ch sá»­"

**Bá»™ lá»c:**
- Tá»« ngÃ y: Chá»n ngÃ y báº¯t Ä‘áº§u
- Äáº¿n ngÃ y: Chá»n ngÃ y káº¿t thÃºc
- Click "ğŸ” Lá»c" Ä‘á»ƒ tÃ¬m kiáº¿m

**Danh sÃ¡ch hiá»ƒn thá»‹:**
- MÃ£ PN
- NgÃ y nháº­p
- NhÃ¢n viÃªn
- NhÃ  cung cáº¥p
- Tá»•ng tiá»n

## Luá»“ng hoáº¡t Ä‘á»™ng

### A. BÃ¡n hÃ ng vÃ  In hÃ³a Ä‘Æ¡n

1. **Táº¡o hÃ³a Ä‘Æ¡n:**
   - ThÃªm sáº£n pháº©m vÃ o giá» hÃ ng
   - Click "ğŸ’³ THANH TOÃN"

2. **Há»i in hÃ³a Ä‘Æ¡n:**
   - Sau khi thanh toÃ¡n thÃ nh cÃ´ng, há»‡ thá»‘ng hiá»ƒn thá»‹:
     ```
     Thanh toÃ¡n thÃ nh cÃ´ng!
     MÃ£ hÃ³a Ä‘Æ¡n: 123
     Tá»•ng tiá»n: 500,000 Ä‘
     
     Báº¡n cÃ³ muá»‘n in hÃ³a Ä‘Æ¡n khÃ´ng?
     [CÃ³] [KhÃ´ng]
     ```

3. **In hÃ³a Ä‘Æ¡n:**
   - Chá»n "CÃ³" â†’ Má»Ÿ form xem trÆ°á»›c
   - Click "ğŸ–¨ï¸ In" Ä‘á»ƒ in
   - Click "ÄÃ³ng" Ä‘á»ƒ thoÃ¡t

4. **Xem láº¡i hÃ³a Ä‘Æ¡n cÅ©:**
   - Click nÃºt "ğŸ“‹ Lá»‹ch sá»­" trÃªn form BÃ¡n hÃ ng
   - Chá»n khoáº£ng thá»i gian vÃ  click "ğŸ” Lá»c"
   - Double-click vÃ o hÃ³a Ä‘Æ¡n cáº§n xem
   - Click "ğŸ–¨ï¸ In" Ä‘á»ƒ in láº¡i

### B. Nháº­p kho vÃ  In phiáº¿u nháº­p

1. **Táº¡o phiáº¿u nháº­p:**
   - Chá»n nhÃ  cung cáº¥p
   - ThÃªm sáº£n pháº©m vÃ o phiáº¿u nháº­p
   - Click "ğŸ’¾ LÆ°u phiáº¿u"

2. **Há»i in phiáº¿u nháº­p:**
   - Sau khi lÆ°u thÃ nh cÃ´ng, há»‡ thá»‘ng hiá»ƒn thá»‹:
     ```
     LÆ°u phiáº¿u nháº­p thÃ nh cÃ´ng!
     MÃ£ phiáº¿u nháº­p: 45
     Tá»•ng tiá»n: 2,000,000 Ä‘
     
     Báº¡n cÃ³ muá»‘n in phiáº¿u nháº­p khÃ´ng?
     [CÃ³] [KhÃ´ng]
     ```

3. **In phiáº¿u nháº­p:**
   - Chá»n "CÃ³" â†’ Má»Ÿ form xem trÆ°á»›c
   - Click "ğŸ–¨ï¸ In" Ä‘á»ƒ in
   - Click "ÄÃ³ng" Ä‘á»ƒ thoÃ¡t

4. **Xem láº¡i phiáº¿u nháº­p cÅ©:**
   - Click nÃºt "ğŸ“‹ Lá»‹ch sá»­" trÃªn form Nháº­p kho
   - Chá»n khoáº£ng thá»i gian vÃ  click "ğŸ” Lá»c"
   - Double-click vÃ o phiáº¿u nháº­p cáº§n xem
   - Click "ğŸ–¨ï¸ In" Ä‘á»ƒ in láº¡i

## ThÃ´ng tin in áº¥n

### HÃ³a Ä‘Æ¡n bÃ¡n láº» bao gá»“m:
- TÃªn cá»­a hÃ ng, Ä‘á»‹a chá»‰, SÄT
- TiÃªu Ä‘á»: "HÃ“A ÄÆ N BÃN Láºº"
- Sá»‘ HÄ, NgÃ y bÃ¡n, TÃªn nhÃ¢n viÃªn
- Báº£ng chi tiáº¿t: TÃªn hÃ ng, SL, ÄÆ¡n giÃ¡, ThÃ nh tiá»n
- Tá»•ng tiá»n
- Lá»i cáº£m Æ¡n: "Cáº£m Æ¡n quÃ½ khÃ¡ch! Háº¹n gáº·p láº¡i!"

### Phiáº¿u nháº­p kho bao gá»“m:
- TÃªn cá»­a hÃ ng, Ä‘á»‹a chá»‰, SÄT
- TiÃªu Ä‘á»: "PHIáº¾U NHáº¬P KHO"
- Sá»‘ PN, NgÃ y nháº­p, TÃªn nhÃ¢n viÃªn, NhÃ  cung cáº¥p
- Báº£ng chi tiáº¿t: TÃªn hÃ ng, SL, ÄÆ¡n giÃ¡, ThÃ nh tiá»n
- Tá»•ng tiá»n
- ThÃ´ng bÃ¡o: "ÄÃ£ nháº­p kho thÃ nh cÃ´ng!"

## LÆ°u Ã½ ká»¹ thuáº­t

### Cáº¥u trÃºc code:
```
frmBanHang.cs
â”œâ”€â”€ ThanhToan() - ThÃªm logic há»i in
â””â”€â”€ btnLichSu_Click() - Má»Ÿ form lá»‹ch sá»­

frmNhapKho.cs
â”œâ”€â”€ LuuPhieuNhap() - ThÃªm logic há»i in
â””â”€â”€ btnLichSu_Click() - Má»Ÿ form lá»‹ch sá»­

frmXemTruocIn.cs
â”œâ”€â”€ Constructor(maGiaoDich, loaiPhieu)
â”œâ”€â”€ LoadData() - Táº£i dá»¯ liá»‡u tá»« DB
â”œâ”€â”€ HienThiXemTruoc() - Hiá»ƒn thá»‹ trÃªn form
â”œâ”€â”€ btnIn_Click() - Má»Ÿ PrintPreviewDialog
â””â”€â”€ PrintDocument_PrintPage() - Váº½ ná»™i dung in

frmLichSuHoaDon.cs
â”œâ”€â”€ LoadLichSuHoaDon() - Táº£i danh sÃ¡ch
â”œâ”€â”€ btnLoc_Click() - Lá»c theo ngÃ y
â””â”€â”€ dgvLichSu_CellDoubleClick() - Má»Ÿ xem chi tiáº¿t

frmLichSuPhieuNhap.cs
â”œâ”€â”€ LoadLichSuPhieuNhap() - Táº£i danh sÃ¡ch
â”œâ”€â”€ btnLoc_Click() - Lá»c theo ngÃ y
â””â”€â”€ dgvLichSu_CellDoubleClick() - Má»Ÿ xem chi tiáº¿t
```

### Truy váº¥n SQL:

**Láº¥y thÃ´ng tin hÃ³a Ä‘Æ¡n:**
```sql
SELECT HD.MaHoaDon, HD.NgayBan, HD.TongTien, NV.TenNhanVien
FROM HOADON HD
INNER JOIN NHANVIEN NV ON HD.MaNhanVien = NV.MaNhanVien
WHERE HD.MaHoaDon = @Ma
```

**Láº¥y chi tiáº¿t hÃ³a Ä‘Æ¡n:**
```sql
SELECT HH.TenHang, B.SoLuongBan AS SoLuong, 
       B.DonGia, (B.SoLuongBan * B.DonGia) AS ThanhTien
FROM BAN B
INNER JOIN HANGHOA HH ON B.MaHang = HH.MaHang
WHERE B.MaHoaDon = @Ma
```

**Láº¥y thÃ´ng tin phiáº¿u nháº­p:**
```sql
SELECT PN.MaPhieuNhap, PN.NgayNhap, PN.TongTienNhap, 
       NV.TenNhanVien, NCC.TenNhaCungCap
FROM PHIEUNHAP PN
INNER JOIN NHANVIEN NV ON PN.MaNhanVien = NV.MaNhanVien
INNER JOIN NHACUNGCAP NCC ON PN.MaNhaCungCap = NCC.MaNhaCungCap
WHERE PN.MaPhieuNhap = @Ma
```

**Láº¥y chi tiáº¿t phiáº¿u nháº­p:**
```sql
SELECT HH.TenHang, N.SoLuongNhap AS SoLuong, 
       N.GiaNhap AS DonGia, (N.SoLuongNhap * N.GiaNhap) AS ThanhTien
FROM NHAP N
INNER JOIN HANGHOA HH ON N.MaHang = HH.MaHang
WHERE N.MaPhieuNhap = @Ma
```

## TÃ¹y chá»‰nh

### Thay Ä‘á»•i thÃ´ng tin cá»­a hÃ ng:
Má»Ÿ file `frmXemTruocIn.cs` vÃ  tÃ¬m cÃ¡c dÃ²ng:
```csharp
string tenCuaHang = "Cá»¬A HÃ€NG Táº P HÃ“A ABC";
string diaChi = "Äá»‹a chá»‰: 123 ÄÆ°á»ng ABC, TP.HCM - SÄT: 0123-456-789";
```

### Thay Ä‘á»•i Ä‘á»‹nh dáº¡ng in:
Chá»‰nh sá»­a method `PrintDocument_PrintPage()` trong `frmXemTruocIn.cs`

### Thay Ä‘á»•i khoáº£ng thá»i gian máº·c Ä‘á»‹nh:
Trong `frmLichSuHoaDon_Load()` vÃ  `frmLichSuPhieuNhap_Load()`:
```csharp
dtpTuNgay.Value = DateTime.Now.AddMonths(-1); // Máº·c Ä‘á»‹nh 1 thÃ¡ng trÆ°á»›c
dtpDenNgay.Value = DateTime.Now;
```

## Kiá»ƒm tra

### Test case 1: In hÃ³a Ä‘Æ¡n má»›i
1. Táº¡o hÃ³a Ä‘Æ¡n má»›i
2. Thanh toÃ¡n
3. Chá»n "CÃ³" khi há»i in
4. Kiá»ƒm tra xem trÆ°á»›c
5. Click In

### Test case 2: Xem lá»‹ch sá»­ hÃ³a Ä‘Æ¡n
1. Má»Ÿ form BÃ¡n hÃ ng
2. Click "ğŸ“‹ Lá»‹ch sá»­"
3. Chá»n khoáº£ng thá»i gian
4. Click "ğŸ” Lá»c"
5. Double-click vÃ o hÃ³a Ä‘Æ¡n
6. Kiá»ƒm tra thÃ´ng tin hiá»ƒn thá»‹

### Test case 3: In láº¡i hÃ³a Ä‘Æ¡n cÅ©
1. Tá»« lá»‹ch sá»­, double-click vÃ o hÃ³a Ä‘Æ¡n
2. Click "ğŸ–¨ï¸ In"
3. Kiá»ƒm tra ná»™i dung in

### Test case 4: In phiáº¿u nháº­p má»›i
1. Táº¡o phiáº¿u nháº­p má»›i
2. LÆ°u phiáº¿u
3. Chá»n "CÃ³" khi há»i in
4. Kiá»ƒm tra xem trÆ°á»›c
5. Click In

### Test case 5: Xem lá»‹ch sá»­ phiáº¿u nháº­p
1. Má»Ÿ form Nháº­p kho
2. Click "ğŸ“‹ Lá»‹ch sá»­"
3. Chá»n khoáº£ng thá»i gian
4. Click "ğŸ” Lá»c"
5. Double-click vÃ o phiáº¿u nháº­p
6. Kiá»ƒm tra thÃ´ng tin hiá»ƒn thá»‹

## Lá»£i Ã­ch

âœ… **Tiá»‡n lá»£i:** NÃºt Lá»‹ch sá»­ ngay trong form lÃ m viá»‡c, khÃ´ng cáº§n vÃ o menu
âœ… **Nhanh chÃ³ng:** Há»i in ngay sau khi hoÃ n thÃ nh giao dá»‹ch
âœ… **Linh hoáº¡t:** CÃ³ thá»ƒ in láº¡i báº¥t ká»³ lÃºc nÃ o tá»« lá»‹ch sá»­
âœ… **Trá»±c quan:** Xem trÆ°á»›c trÆ°á»›c khi in, trÃ¡nh lÃ£ng phÃ­ giáº¥y
âœ… **Äáº§y Ä‘á»§:** Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ thÃ´ng tin cáº§n thiáº¿t trÃªn hÃ³a Ä‘Æ¡n/phiáº¿u nháº­p

## HoÃ n thÃ nh âœ“

- [x] Form xem trÆ°á»›c vÃ  in (frmXemTruocIn)
- [x] Form lá»‹ch sá»­ hÃ³a Ä‘Æ¡n (frmLichSuHoaDon)
- [x] Form lá»‹ch sá»­ phiáº¿u nháº­p (frmLichSuPhieuNhap)
- [x] NÃºt Lá»‹ch sá»­ trong form BÃ¡n hÃ ng
- [x] NÃºt Lá»‹ch sá»­ trong form Nháº­p kho
- [x] Há»i in sau thanh toÃ¡n
- [x] Há»i in sau lÆ°u phiáº¿u nháº­p
- [x] Chá»©c nÄƒng in vá»›i PrintDocument
- [x] Lá»c theo khoáº£ng thá»i gian
- [x] Double-click Ä‘á»ƒ xem chi tiáº¿t
